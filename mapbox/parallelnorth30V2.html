<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>30th Parallel North</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
.map-overlay-container {
    position: absolute;
    width: 25%;
    top: 0;
    left: 0;
    padding: 10px;
    z-index: 1;
}

.map-overlay {
    font: 15px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    background-color: #fff;
    border-radius: 3px;
    padding: 10px;
    box-shadow:0 1px 2px rgba(0,0,0,0.20);
}

.map-overlay h2,
.map-overlay p {
    margin: 0 0 10px;
}
</style>

<div id='map'></div>

<div class='map-overlay-container'>
  <div class='map-overlay'>
    <h2 id='location-title'></h2>
    <p id='location-description'></p>

   
  </div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoianVuY2h1YW4iLCJhIjoiY2o4bHowcWF1MHVkeTMybXY1ZDE2aHk4OSJ9.HF2W8s1GNuY550GcjRsRBw';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/satellite-v9',
    center: [0, 30.0],
    maxZoom: 16,
    minZoom: 0,
    zoom: 2
});

var nav = new mapboxgl.NavigationControl();
map.addControl(nav, 'top-right');

var title = document.getElementById('location-title');
var description = document.getElementById('location-description');

var locations = [
{
    "id": "0",
    "title": "Ancient China Civilization",
    "description": "30th parallel north overlaps with six ancient civilization. China, and the mother river, Yangtze river's estuary locates on this line!",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [116.853275, 30.793884]
                    },
                    "properties": {
                        "title": "Ancient China",
                         "icon": "star"
                       
                    }
                },
                                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [121.498933 ,31.537139]
                    },
                    "properties": {
                        "title": "Yangtze River",
                         "icon": "harbor"
                       
                    }
                }
                   
                ]
            }
        },
    "camera": {
        center: [120.988692, 30.585663],
        zoom: 6,
        
        pitch: 0
    }
}, 

{
    "id": "1",
    "title": "Ancient India Civilization",
    "description": " 50 or 60 million years ago India slowly smashed into Asia and formed the Himalaya and Hindu Kush Mountains. Artifacts indicate that around 5000 BCE, farming developed in South Asia. Slowly, people began to live in permanent places and villages slowly developed—eventually these villages turned into cities and created one of the earliest human civilizations in the world.  Historians and archeologists believe the Ancient India Civilization began around 3000 BCE. There is evidence of trade between Ancient India and Mesopotamia as early as 3200 BCE. ",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [76.247809, 29.118705]
                    },
                    "properties": {
                        "title": "Ancient India",
                         "icon": "star"
                       
                    }
                }
                   
                ]
            }
        },
    "camera": {
        center: [76.247809, 29.118705],
        zoom: 4,
        
        pitch: 0
    }
}, 

{
    "id": "2",
    "title": "Mesopotamia Civilization",
    "description": "Mesopotamia civilization in the mid-east. Ancient Mesopotamia was a green land where many plants grew due to the rich soil and occasional rain. It is often called the Fertile Crescent or the Cradle of Civilization.  The Tigris and Euphrates rivers supplied fresh water for humans, plants, and animals. All that remains today of most Mesopotamian architecture are broken mud-brick buildings in modern-day Iraq.  This is why the architecture of Mesopotamia is hard to find today.  The mud-bricks have eroded away, but archeologists have uncovered amazing artifacts under the ruble that tell the story of these ancient people.",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [46.961198, 31.188016]
                    },
                    "properties": {
                        "title": "Mesopotamia",
                         "icon": "star"
                       
                    }
                },

                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [49.027619, 30.061082]
                    },
                    "properties": {
                        "title": "Euphrates River & Tigris River",
                         "icon": "harbor"
                       
                    }
                }
                   
                ]
            }
        },
    "camera": {
        center: [48.247809, 30.118705],
        zoom: 6,
        
        pitch: 0
    }
},

{
    "id": "3",
    "title": "Ancient Egypt Civilization",
    "description": "Ancient Egypt Civilization in Africa. The Nile is the world’s longest river. For thousands of years the Nile has flooded when the rainy season begins in central Africa.  The Nile flows over the riverbanks and after several months it soaks into the ground, evaporates, or flows into the Mediterranean.  As the water level lowered, it would leave behind rich fertile soil for farmers. The flooding usually began around June and it happens every year, so it was a dependable source of water and fertilizer for farmers.  Egyptians dug canals to pull water out of the flooded river, which they saved for irrigation later on.  ",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [30.789323, 30.698036]
                    },
                    "properties": {
                        "title": "Ancient Egypt",
                         "icon": "star"
                       
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [31.182000, 31.044738]
                    },
                    "properties": {
                        "title": "Nile River",
                         "icon": "harbor"
                       
                    }
                }
                   
                ]
            }
        },
    "camera": {
        center: [30.789323, 30.698036],
        zoom: 8,
        
        pitch: 0
    }
}, 
{
    "id": "4",
    "title": "Mother rivers of civilizations on earth.",
    "description": "The estuaries for Yangtze river,Euphrates River, Tigris River, Nile River, Mississippi River are all located here!",

        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [31.182000,31.044738]
                    },
                    "properties": {
                        "title": "Nile River",
                         "icon": "harbor"
                       
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [49.027619, 30.061082]
                    },
                    "properties": {
                        "title": "Euphrates River & Tigris River",
                         "icon": "harbor"
                       
                    }
                },
                 {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [121.498933 ,31.537139]
                    },
                    "properties": {
                        "title": "Yangtze River",
                         "icon": "harbor"
                       
                    }
                },


                                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-89.255393, 29.170521]
                    },
                    "properties": {
                        "title": "Mississippi River",
                         "icon": "harbor"
                       
                    }
                }

                ]
            }
        },
    "camera": {
        center: [0.5, 30.6260],
        pitch: 0,
        zoom: 2
    }
},

{
    "id": "5",
    "title": "Religion",
    "description": "The birthplaces of Buddism,Judaism,Christianity,Islam.",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [80.821503, 29.063056]
                    },
                    "properties": {
                        "title": "Buddism ",
                         "icon": "buddism"
                       
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [35.232693, 31.769450]
                    },
                    "properties": {
                        "title": "Christianity, Judaism",
                         "icon": "religious-christian"
                       
                    }
                },
                         {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [39.363587, 25.376320]
                    },
                    "properties": {
                        "title": "Islam",
                         "icon": "religious-muslim"
                       
                    }
                }
                   
                ]
            }
        },
    "camera": {
        center: [30.789323, 30.698036],
        zoom: 4,
        
        pitch: 0
    }
}, 

{
    "id": "6",
    "title": "Highest Elevation on Earth",
    "description": "Mount Everest, highest mountain on earth.",
    "image":"",
    "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [86.925278,27.988056]
                    },
                    "properties": {
                        "title": "Everest",
                         "icon": "mountain"
                       
                    }
                }]
            }
        },
    "camera": {
        center: [86.925278,27.988056],
        zoom: 12,
        pitch: 50
    }
}, 
 {
    "id":"7",
    "title": "Dead sea",
    "description": "Lowest elevation on earth. The Dead Sea is 304 m (997 ft) deep, the deepest hypersaline lake in the world.It is 9.6 times as salty as the ocean and one of the world's saltiest bodies of water, which makes for a harsh environment in which plants and animals cannot live.",

               "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [35.552387,31.559339]
                    },
                    "properties": {
                        "title": "Dead sea",
                         "icon": "water"
                       
                    }
                }]
            }
        },
    "camera": {
        center: [35.552387,31.559339],
        zoom: 10,
        pitch: 50
    }
},

 {
    "id":"8",
    "title": "Sphinx and Pyramid",
    "description": "Oldest of the Seven Wonders of the Ancient World. It's the most accurately aligned to north of any structure in the world. The methods used to move and place the stones remain a matter of speculations.",

               "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [31.1353734, 29.9752733]
                    },
                    "properties": {
                        "title": "Great Sphix of Giza",
                         "icon": "triangle"
                       
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [31.1287804, 29.9752963]
                    },
                    "properties": {
                        "title": "Great Pyramid of Giza",
                         "icon": "triangle"
                       
                    }
                }]
            }
        },
    "camera": {
        center: [31.1287804, 29.9752963],
        zoom: 15,
        pitch: 50
    }
}


];

function highlightBorough(code) {
    // Only show the polygon feature that cooresponds to `borocode` in the data
    map.setFilter('highlight', ["==", "borocode", code]);
}




function playback(index) {
    title.textContent = locations[index].title;
    description.textContent = locations[index].description;

    //highlightBorough(locations[index].id ? locations[index].id : '');

    // Animate the map position based on camera properties
    map.flyTo(locations[index].camera);

    if (map.getSource(locations[index].id)) {
        //map.removeSource(locations[index].id);
        map.removeLayer(locations[index].id);

    }
    else {
        map.addSource(locations[index].id,locations[index].source);

    }

   map.addLayer({
        "id": locations[index].id,
        "type": "symbol",
        "source": locations[index].id,
        "layout": {
            "icon-image": "{icon}-15",
            
            //"icon-size":2,
            "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
      
    });



    map.once('moveend', function() {


        // Duration the slide is on screen after interaction
        window.setTimeout(function() {
            // Increment index
            index = (index + 1 === locations.length) ? 0 : index + 1;
            playback(index);
        }, 20000); // After callback, show the location for 3 seconds.
    });
}

// Display the last title/description first
title.textContent = locations[locations.length - 1].title;
description.textContent = locations[locations.length - 1].description;

map.on('load', function() {

    map.addLayer({
        "id": "north30",
        "type": "fill",
        "source": {
            "type": "geojson",
            "data":{
                'type':'Feature',
                'geometry':{
                    'type':'Polygon',
                    'coordinates':[[[-180,25],[-180,35],[180,35],[180,25],[-180,25]]]
                }
            }
            
        },
        'layout':{},
        "paint": {
            "fill-color": "#fd6b50",
            "fill-opacity": 0.15
        }
        
    }); 
   // setTimeout(3000);

    // Start the playback animation for each borough
    playback(0);
});
</script>

</body>
</html>